from datetime import datetime
from travel.models import ScheduledDeparture
import sys

SCHEDULE_EAST = """4:56A 11:25A 6:12P 5:30A 1:10P 8:50P 5:30A 1:10P 8:50P
5:03A 11:35A 6:20P 5:40A 1:20P 9:00P 5:40A 1:20P 9:00P
5:25A 11:45A 6:27P-E 5:50A 1:30P 9:10P 5:50A 1:30P 9:10P
5:34A 11:55A 6:35P 6:00A 1:40P 9:20P 6:00A 1:40P 9:20P
5:40A 12:05P 6:40P 6:10A 1:50P 9:30P 6:10A 1:50P 9:30P
5:48A 12:15P 6:50P 6:20A 2:00P 9:40P 6:20A 2:00P 9:40P
5:55A 12:25P 7:00P 6:30A 2:10P 9:50P 6:30A 2:10P 9:50P
6:03A 12:35P 7:10P 6:40A 2:20P 10:00P 6:40A 2:20P 10:00P
6:10A 12:45P 7:20P 6:50A 2:30P 10:10P 6:50A 2:30P 10:10P
6:18A 12:55P 7:25P-E 7:00A 2:40P 10:20P 7:00A 2:40P 10:20P
6:25A 1:05P 7:30P 7:10A 2:50P 10:30P 7:10A 2:50P 10:30P
6:33A 1:15P 7:40P 7:20A 3:00P 10:40P 7:20A 3:00P 10:40P
6:40A 1:25P 7:50P 7:30A 3:10P 10:50P 7:30A 3:10P 10:50P
6:48A 1:35P 8:00P 7:40A 3:20P 11:00P 7:40A 3:20P 11:00P
6:55A 1:45P 8:10P 7:50A 3:30P 11:10P 7:50A 3:30P 11:10P
7:03A 1:55P 8:20P 8:00A 3:40P 11:20P 8:00A 3:40P 11:20P
7:10A 2:05P 8:30P 8:10A 3:50P 11:30P 8:10A 3:50P 11:30P
7:18A 2:15P 8:40P 8:20A 4:00P 11:40P 8:20A 4:00P 11:40P
7:25A 2:25P 8:50P 8:30A 4:10P 11:45P-E 8:30A 4:10P 11:45P-E
7:33A 2:35P 9:00P 8:40A 4:20P 12:00A 8:40A 4:20P 12:00A
7:40A 2:45P 9:10P 8:50A 4:30P 12:15A 8:50A 4:30P 12:15A
7:48A 2:55P 9:20P 9:00A 4:40P 12:30A 9:00A 4:40P 12:30A
7:55A 3:10P 9:30P 9:10A 4:50P 12:35A-C 9:10A 4:50P 12:35A-C
8:03A 3:15P 9:40P 9:20A 5:00P 12:43A-C 9:20A 5:00P 12:43A-C
8:10A 3:25P 9:50P 9:30A 5:10P 1:00A-C 9:30A 5:10P 1:00A-C
8:18A 3:35P 10:00P 9:40A 5:20P 1:13A-C 9:40A 5:20P 1:13A-C
8:25A 3:42P 10:10P 9:50A 5:30P 9:50A 5:30P
8:33A 3:50P 10:20P 10:00A 5:40P 10:00A 5:40P
8:40A 3:57P 10:30P 10:10A 5:50P 10:10A 5:50P
8:48A 4:05P 10:40P 10:20A 6:00P 10:20A 6:00P
8:55A 4:12P 10:50P 10:30A 6:10P 10:30A 6:10P
9:03A 4:20P 11:00P 10:40A 6:20P 10:40A 6:20P
9:15A 4:27P 11:10P 10:50A 6:30P 10:50A 6:30P
9:25A 4:35P 11:20P 11:00A 6:40P 11:00A 6:40P
9:30A-E 4:42P 11:30P 11:10A 6:50P 11:10A 6:50P
9:35A 4:50P 11:40P 11:20A 7:00P 11:20A 7:00P
9:45A 4:57P 11:45P-E 11:30A 7:10P 11:30A 7:10P
9:55A 5:05P 12:00A 11:40A 7:20P 11:40A 7:20P
10:05A 5:12P 12:15A 11:50A 7:30P 11:50A 7:30P
10:15A 5:20P 12:30A 12:00P 7:40P 12:00P 7:40P
10:25A 5:27P 12:35A-C 12:10P 7:50P 12:10P 7:50P
10:35A 5:35P 12:43A-C 12:20P 8:00P 12:20P 8:00P
10:45A 5:42P 1:00A-C 12:30P 8:10P 12:30P 8:10P
10:55A 5:50P 1:13A-C 12:40P 8:20P 12:40P 8:20P
11:05A 5:57P
11:15A 6:05P"""

SCHEDULE_WEST = """3:59A 10:29A 5:21P 4:34A 12:14P 7:54P 4:34A 12:14P 7:54P
4:08A 10:39A 5:29P 4:46A 12:24P 8:04P 4:55A 12:24P 8:04P
4:31A 10:49A 5:36P 5:00A 12:34P 8:14P 5:00A 12:34P 8:14P
4:41A 10:59A 5:44P 5:15A 12:44P 8:24P 5:15A 12:44P 8:24P
4:46A 11:09A 5:51P 5:20A 12:54P 8:34P 5:20A 12:54P 8:34P
4:59A 11:19A 5:59P 5:29A 1:04P 8:44P 5:29A 1:04P 8:44P
5:04A 11:29A 6:06P 5:36A 1:14P 8:54P 5:36A 1:14P 8:54P
5:13A 11:39A 6:14P 5:44A 1:24P 9:04P 5:44A 1:24P 9:04P
5:18A 11:49A 6:21P 5:54A 1:34P 9:14P 5:54A 1:34P 9:14P
5:28A 11:59A 6:30P 6:04A 1:44P 9:24P 6:04A 1:44P 9:24P
5:34A 12:09P 6:37P 6:14A 1:54P 9:34P 6:14A 1:54P 9:34P
5:42A 12:19P 6:44P 6:24A 2:04P 9:44P 6:24A 2:04P 9:44P
5:49A 12:29P 6:54P 6:34A 2:14P 9:54P 6:34A 2:14P 9:54P
5:57A 12:39P 7:04P 6:44A 2:24P 10:04P 6:44A 2:24P 10:04P
6:04A 12:49P 7:14P 6:54A 2:34P 10:14P 6:54A 2:34P 10:14P
6:12A 12:59P 7:24P 7:04A 2:44P 10:24P 7:04A 2:44P 10:24P
6:19A 1:09P 7:34P 7:14A 2:54P 10:34P 7:14A 2:54P 10:34P
6:27A 1:19P 7:44P 7:24A 3:04P 10:44P 7:24A 3:04P 10:44P
6:34A 1:29P 7:54P 7:34A 3:14P 10:54P 7:34A 3:14P 10:54P
6:42A 1:39P 8:04P 7:44A 3:24P 11:04P 7:44A 3:24P 11:04P
6:49A 1:49P 8:14P 7:54A 3:34P 11:14P 7:54A 3:34P 11:14P
6:57A 1:59P 8:24P 8:04A 3:44P 11:24P 8:04A 3:44P 11:24P
7:04A 2:09P 8:34P 8:14A 3:54P 11:39P 8:14A 3:54P 11:39P
7:12A 2:19P 8:44P 8:24A 4:04P 11:54P 8:24A 4:04P 11:54P
7:19A 2:29P 8:54P 8:34A 4:14P 12:14A 8:34A 4:14P 12:14A
7:27A 2:34P 9:04P 8:44A 4:24P 12:24A 8:44A 4:24P 12:24A
7:34A 2:39P 9:14P 8:54A 4:34P 8:54A 4:34P
7:42A 2:49P 9:24P 9:04A 4:44P 9:04A 4:44P
7:49A 2:59P 9:34P 9:14A 4:54P 9:14A 4:54P
7:57A 3:10P 9:44P 9:24A 5:04P 9:24A 5:04P
8:04A 3:23P 9:54P 9:34A 5:14P 9:34A 5:14P
8:12A 3:29P 10:04P 9:44A 5:24P 9:44A 5:24P
8:19A 3:36P 10:14P 9:54A 5:34P 9:54A 5:34P
8:27A 3:44P 10:24P 10:04A 5:44P 10:04A 5:44P
8:34A 3:51P 10:34P 10:14A 5:54P 10:14A 5:54P
8:42A 3:59P 10:44P 10:24A 6:04P 10:24A 6:04P
8:49A 4:06P 10:54P 10:34A 6:14P 10:34A 6:14P
8:57A 4:14P 11:04P 10:44A 6:24P 10:44A 6:24P
9:09A 4:21P 11:14P 10:54A 6:34P 10:54A 6:34P
9:19A 4:29P 11:24P 11:04A 6:44P 11:04A 6:44P
9:29A 4:36P 11:39P 11:14A 6:54P 11:14A 6:54P
9:34A 4:44P 11:54P 11:24A 7:04P 11:24A 7:04P
9:49A 4:51P 12:14A 11:34A 7:14P 11:34A 7:14P
9:59A 4:59P 12:24A 11:44A 7:24P 11:44A 7:24P
10:09A 5:06P
10:19A 5:14P"""

def store(direction, value):
    if 'P' in value:
        v = '%sPM' % (value[0:value.index('P')])
    elif 'A' in value:
        v = '%sAM' % (value[0:value.index('A')])

    #v = value.replace('A', 'AM').replace('P', 'PM')    
    time = datetime.strptime(v,'%I:%M%p').time()
    print v, time
    ScheduledDeparture.objects.create(time=time, direction=direction)

def store_direction(direction, data):
    for line in [line.split() for line in data.split('\n')]:
        store(direction, line[0])
        store(direction, line[1])
        if len(line) >= 3:
            store(direction, line[2])
        
def run():
    store_direction('E', SCHEDULE_EAST)
    store_direction('W', SCHEDULE_WEST)
